<!-- views/partials/navbar.ejs -->
<nav
  class="backdrop-blur bg-black/40 border-b border-lime-400/50 sticky top-0 z-50"
>
  <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
    <a href="/" class="flex items-center gap-3">
      <img
        src="/img/sticker-1.png"
        class="h-10 w-10 drop-shadow-neon"
        alt="logo"
      />
      <span
        class="font-bangers text-3xl tracking-wider text-lime-300 drop-shadow-neon"
        >Gachikuta</span
      >
    </a>

    <form action="/" method="get" class="hidden md:flex items-center gap-2">
      <input
        name="q"
        value="<%= (typeof q !== 'undefined' && q) ? q : '' %>"
        placeholder="ค้นหาอีเวนต์, สถานที่, หมวดหมู่…"
        class="w-64 px-3 py-2 rounded-lg bg-black/40 border border-lime-300/50 text-lime-100 focus:outline-none focus:ring-2 focus:ring-lime-400"
      />
      <button
        class="px-4 py-2 rounded-lg bg-lime-400 text-black font-semibold hover:translate-y-[-1px] transition"
      >
        ค้นหา
      </button>
    </form>

    <div class="flex items-center gap-3">
      <% if (typeof user !== 'undefined' && user) { %>

      <a href="/my-tickets" class="nav-btn"
        ><i class="fa-solid fa-ticket"></i> ตั๋วของฉัน</a
      >
      <a href="/cart" class="nav-btn"
        ><i class="fa-solid fa-cart-shopping"></i> ตะกร้า</a
      >
      <span class="text-lime-200 text-sm">Hi, <%= user.email %></span>
      <button id="logoutBtn" class="nav-btn">
        <i class="fa-solid fa-right-from-bracket"></i> ออกจากระบบ
      </button>
      <script>
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", async () => {
            const r = await fetch("/logout");
            const data = await r.json();
            alert(data.msg);
            location.href = "/";
          });
        }
      </script>
      <% } else { %>
      <a href="/signup" class="nav-btn"
        ><i class="fa-solid fa-user-plus"></i> สมัครสมาชิก</a
      >
      <% } %>
    </div>
  </div>
</nav>
