<!DOCTYPE html>
<html lang="th">
  <%- include('partials/head') %>
  <body class="min-h-screen bg-gradient-to-b from-black via-neutral-900 to-zinc-950 text-white font-[Prompt]">
    <%- include('partials/navbar') %>

    <main class="mx-auto max-w-5xl px-4 py-14">
      <h1 class="font-bangers text-5xl text-red-500 drop-shadow-[0_0_12px_rgba(229,9,20,0.8)] mb-10">
        ตั๋วของฉัน
      </h1>

      <% if (myTickets && myTickets.length) { %>
        <div class="grid gap-8 md:grid-cols-2">
          <% myTickets.forEach(tk => { %>
            <div class="bg-neutral-900/80 border border-red-600/40 shadow-[0_0_25px_rgba(229,9,20,0.2)] rounded-2xl p-6 backdrop-blur-md transition-transform hover:scale-[1.02]">
              
              <div class="flex items-center justify-between">
                <h3 class="text-2xl font-semibold text-white">
                  <%= tk.event_id ? tk.event_id.title : "Event" %>
                </h3>
                <span class="bg-red-600 text-white text-sm px-3 py-1 rounded-full shadow-[0_0_10px_rgba(229,9,20,0.5)]">
                  x<%= tk.quantity %>
                </span>
              </div>

              <div class="mt-4 space-y-1 text-sm text-gray-300">
                <div><i class="fa-solid fa-ticket text-red-500"></i> 
                  โค้ดตั๋ว: 
                  <span class="font-mono text-red-400"><%= tk.ticket_code %></span>
                </div>
                <% if (tk.event_id) { %>
                  <div><i class="fa-solid fa-location-dot text-red-500"></i> <%= tk.event_id.location %></div>
                  <div><i class="fa-solid fa-coins text-red-500"></i> ราคา ฿<%= tk.event_id.price %></div>
                <% } %>
              </div>

              <!-- QR Mock -->
              <div class="mt-6 flex justify-center">
                <div class="h-28 w-28 border-2 border-red-500 rounded-lg flex items-center justify-center bg-neutral-800">
                  <div class="h-16 w-16 bg-red-600/70"></div>
                </div>
              </div>

              <a href="/event/<%= tk.event_id ? tk.event_id._id : "#" %>" 
                 class="mt-6 inline-block w-full text-center py-2.5 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-white tracking-wide shadow-[0_0_15px_rgba(229,9,20,0.6)] transition-all duration-200 hover:scale-[1.02]">
                รายละเอียดอีเวนต์
              </a>
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <p class="text-gray-400 mt-10">ยังไม่มีตั๋วที่ซื้อ</p>
      <% } %>
    </main>

    <%- include('partials/footer') %>
  </body>
</html>
